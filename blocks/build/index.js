(()=>{"use strict";var e={n:t=>{var l=t&&t.__esModule?()=>t.default:()=>t;return e.d(l,{a:l}),l},d:(t,l)=>{for(var a in l)e.o(l,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:l[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,l=window.wp.blocks,a=window.wp.i18n,r=window.wp.blockEditor,s=window.wp.components,o=window.wp.data,n=window.wp.element,i=window.wp.serverSideRender;var c=e.n(i);const d=(0,t.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("path",{d:"M4 6h16v2H4V6zm0 5h16v2H4v-2zm0 5h16v2H4v-2z",fill:"currentColor"}));(0,l.registerBlockType)("interactive-related-posts/related-posts",{title:(0,a.__)("Interactive Related Posts","interactive-related-posts"),description:(0,a.__)("Display related posts with customizable layouts","interactive-related-posts"),category:"widgets",icon:d,keywords:[(0,a.__)("related","interactive-related-posts"),(0,a.__)("posts","interactive-related-posts"),(0,a.__)("interactive","interactive-related-posts")],supports:{html:!1,align:["wide","full"]},attributes:{selectedPosts:{type:"array",default:[]},posts:{type:"number",default:6},columns:{type:"number",default:3},layout:{type:"string",default:"grid"},showExcerpt:{type:"boolean",default:!0},showDate:{type:"boolean",default:!0},showAuthor:{type:"boolean",default:!1},showCategory:{type:"boolean",default:!0},category:{type:"string",default:""},tag:{type:"string",default:""},orderby:{type:"string",default:"date"},order:{type:"string",default:"DESC"}},edit:function({attributes:e,setAttributes:l,clientId:i}){const{selectedPosts:d,posts:p,columns:u,layout:v,showExcerpt:m,showDate:_,showAuthor:g,showCategory:h,category:y,tag:w,orderby:b,order:E}=e,[C,S]=(0,n.useState)(""),[f,k]=(0,n.useState)(!1),{postsList:P,isLoading:B}=(0,o.useSelect)(e=>{const{getEntityRecords:t}=e("core"),l={per_page:20,orderby:"date",order:"desc",status:"publish"};return C&&(l.search=C),{postsList:t("postType","post",l)||[],isLoading:e("core/data").isResolving("core","getEntityRecords",["postType","post",l])}},[C]),D=[{label:(0,a.__)("Grid","interactive-related-posts"),value:"grid"},{label:(0,a.__)("Card","interactive-related-posts"),value:"card"},{label:(0,a.__)("List","interactive-related-posts"),value:"list"},{label:(0,a.__)("Thumbnail","interactive-related-posts"),value:"thumbnail"},{label:(0,a.__)("Link Only","interactive-related-posts"),value:"link-only"},{label:(0,a.__)("Minimal","interactive-related-posts"),value:"minimal"}],x=[{label:(0,a.__)("Date","interactive-related-posts"),value:"date"},{label:(0,a.__)("Title","interactive-related-posts"),value:"title"},{label:(0,a.__)("Random","interactive-related-posts"),value:"rand"},{label:(0,a.__)("Modified","interactive-related-posts"),value:"modified"}],A=[{label:(0,a.__)("Descending","interactive-related-posts"),value:"DESC"},{label:(0,a.__)("Ascending","interactive-related-posts"),value:"ASC"}],O=(0,r.useBlockProps)({className:"irp-block-editor"});return(0,t.createElement)("div",{...O},(0,t.createElement)(r.InspectorControls,null,(0,t.createElement)(s.PanelBody,{title:(0,a.__)("Post Selection","interactive-related-posts"),initialOpen:!0},(0,t.createElement)("div",{className:"irp-post-selector"},(0,t.createElement)("p",null,(0,a.__)("Manually select posts or leave empty to show recent posts automatically.","interactive-related-posts")),d.length>0&&(0,t.createElement)("div",{className:"irp-selected-posts"},(0,t.createElement)("h4",null,(0,a.__)("Selected Posts:","interactive-related-posts")),(0,t.createElement)("ul",null,d.map(e=>(0,t.createElement)("li",{key:e.id},(0,t.createElement)("span",null,e.title),(0,t.createElement)(s.Button,{isSmall:!0,isDestructive:!0,onClick:()=>{return t=e.id,void l({selectedPosts:d.filter(e=>e.id!==t)});var t}},(0,a.__)("Remove","interactive-related-posts"))))),(0,t.createElement)(s.Button,{isSecondary:!0,onClick:()=>l({selectedPosts:[]})},(0,a.__)("Clear All","interactive-related-posts"))),(0,t.createElement)("div",{className:"irp-post-search"},(0,t.createElement)("h4",null,(0,a.__)("Add Posts:","interactive-related-posts")),(0,t.createElement)("input",{type:"text",placeholder:(0,a.__)("Search posts...","interactive-related-posts"),value:C,onChange:e=>S(e.target.value),className:"components-text-control__input"}),B&&(0,t.createElement)(s.Spinner,null),!B&&P.length>0&&(0,t.createElement)("ul",{className:"irp-posts-list"},P.map(e=>{const r=d.some(t=>t.id===e.id);return(0,t.createElement)("li",{key:e.id},(0,t.createElement)("span",null,e.title.rendered),(0,t.createElement)(s.Button,{isSmall:!0,isPrimary:!r,disabled:r,onClick:()=>(e=>{d.some(t=>t.id===e.id)||l({selectedPosts:[...d,{id:e.id,title:e.title.rendered}]})})(e)},r?(0,a.__)("Selected","interactive-related-posts"):(0,a.__)("Add","interactive-related-posts")))})))),0===d.length&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(s.RangeControl,{label:(0,a.__)("Number of Posts","interactive-related-posts"),value:p,onChange:e=>l({posts:e}),min:1,max:20}))),(0,t.createElement)(s.PanelBody,{title:(0,a.__)("Layout Settings","interactive-related-posts")},(0,t.createElement)(s.SelectControl,{label:(0,a.__)("Layout Style","interactive-related-posts"),value:v,options:D,onChange:e=>l({layout:e})}),(0,t.createElement)(s.RangeControl,{label:(0,a.__)("Columns","interactive-related-posts"),value:u,onChange:e=>l({columns:e}),min:1,max:6})),(0,t.createElement)(s.PanelBody,{title:(0,a.__)("Display Options","interactive-related-posts"),initialOpen:!1},(0,t.createElement)(s.ToggleControl,{label:(0,a.__)("Show Excerpt","interactive-related-posts"),checked:m,onChange:e=>l({showExcerpt:e})}),(0,t.createElement)(s.ToggleControl,{label:(0,a.__)("Show Date","interactive-related-posts"),checked:_,onChange:e=>l({showDate:e})}),(0,t.createElement)(s.ToggleControl,{label:(0,a.__)("Show Author","interactive-related-posts"),checked:g,onChange:e=>l({showAuthor:e})}),(0,t.createElement)(s.ToggleControl,{label:(0,a.__)("Show Category","interactive-related-posts"),checked:h,onChange:e=>l({showCategory:e})})),0===d.length&&(0,t.createElement)(s.PanelBody,{title:(0,a.__)("Query Settings","interactive-related-posts"),initialOpen:!1},(0,t.createElement)(s.SelectControl,{label:(0,a.__)("Order By","interactive-related-posts"),value:b,options:x,onChange:e=>l({orderby:e})}),(0,t.createElement)(s.SelectControl,{label:(0,a.__)("Order","interactive-related-posts"),value:E,options:A,onChange:e=>l({order:e})}))),(0,t.createElement)("div",{className:"irp-block-preview"},(0,t.createElement)(c(),{block:"interactive-related-posts/related-posts",attributes:e})))},save:function(){return null}})})();